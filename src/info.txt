ΟΛΟΚΛΗΡΩΜΕΝΗ ΑΝΑΛΥΣΗ SCREEPS AI: ΑΡΧΙΤΕΚΤΟΝΙΚΗ & ΒΕΛΤΙΣΤΟΠΟΙΗΣΗ


ΚΕΝΤΡΙΚΗ ΦΙΛΟΣΟΦΙΑ ΚΑΙ ΔΙΑΧΕΙΡΙΣΗ CPU

Η βασική αρχιτεκτονική είναι Modular (με Managers για κάθε λειτουργία) και επικεντρώνεται στην αποδοτική χρήση της CPU.

A. Ροή Εκτέλεσης (main.js)

Ο κύριος βρόχος εξασφαλίζει ιεραρχική εκτέλεση, με την άμυνα να έχει την υψηλότερη προτεραιότητα.

Σειρά 1: DefenseManager (Άμεση αντίδραση σε απειλές) - ΠΡΟΤΕΡΑΙΟΤΗΤΑ: ΥΨΗΛΟΤΕΡΗ

Σειρά 2: SpawnManager (Διαχείριση παραγωγής Creeps) - ΠΡΟΤΕΡΑΙΟΤΗΤΑ: Υψηλή

Σειρά 3: LogisticsManager (Διαχείριση πόρων - Pull Logistics) - ΠΡΟΤΕΡΑΙΟΤΗΤΑ: Μεσαία

Σειρά 4: ConstructionManager (Δυναμική δόμηση / επισκευές) - ΠΡΟΤΕΡΑΙΟΤΗΤΑ: Μεσαία

Σειρά 5: ExpansionManager (Scouting & Claiming νέων δωματίων) - ΠΡΟΤΕΡΑΙΟΤΗΤΑ: Χαμηλή

Σειρά 6: Role.run() (Εκτέλεση εντολών Creeps) - ΠΡΟΤΕΡΑΙΟΤΗΤΑ: Χαμηλή

B. Διαχείριση CPU (Από το Blueprint & Web)

Memory Cleanup (Υποχρεωτικό): Διαγραφή της μνήμης (Memory.creeps) των νεκρών Creeps, ιδανικά κάθε 10 ticks για εξοικονόμηση CPU.

CPU Check (Ροή ελέγχου): Εάν το Game.cpu.bucket είναι χαμηλό (π.χ., < 5000), οι Managers χαμηλής προτεραιότητας (ExpansionManager, Visuals) παρακάμπτονται πλήρως.

Creeps & CPU: Χρησιμοποιήστε λιγότερα Creeps με μεγαλύτερο μέγεθος (περισσότερα μέρη σώματος) για να μειώσετε το κόστος κίνησης (moveTo) και εκτέλεσης.

Path Caching: Χρησιμοποιήστε την επιλογή reusePath στο creep.moveTo (με τιμή > 5) ή αποθηκεύστε ολόκληρες διαδρομές στη μνήμη για επαναλαμβανόμενες εργασίες, ώστε να αποφύγετε το ακριβό findClosestByPath σε κάθε tick.

ΣΥΣΤΗΜΑ LOGISTICS (LogisticsManager.js)

Η στρατηγική βασίζεται στη φιλοσοφία Pull Logistics (Λογιστική Έλξης) για μέγιστη απόδοση CPU και ελαχιστοποίηση σπατάλης ενέργειας.

A. Φιλοσοφία Pull (Έλξη)

Οι Haulers (Μεταφορείς) δρουν με βάση την πραγματική ζήτηση. Ένας Hauler αναζητά τον άδειο στόχο με την υψηλότερη προτεραιότητα (Pull Request) και έπειτα "τραβάει" την ενέργεια από την πλησιέστερη πηγή.

B. Ιεραρχία Ανάκτησης Ενέργειας (Withdraw Priority)

Προτεραιότητα 1: Dropped Resources / Tombstones (Πάντα pickup()).

Προτεραιότητα 2: Containers (Source / Remote) (withdraw() αν ποσότητα > 75%).

Προτεραιότητα 3: Storage / Terminal (withdraw() αν ποσότητα > 10000).

Προτεραιότητα 4: Receiver Links (withdraw() αν γεμάτο και ο Hauler έχει στόχο).

C. Ιεραρχία Παράδοσης Ενέργειας (Transfer Priority)

Προτεραιότητα 1: Spawns & Extensions (Κρίσιμα) (Αν getFreeCapacity(ENERGY) > 0).

Προτεραιότητα 2: Towers (Άμυνα) (Αν ENERGY < 80% - Γεμίζονται συνεχώς).

Προτεραιότητα 3: Controller Link (Για τους Upgraders - μόνο αν υπάρχει χώρος).

Προτεραιότητα 4: Construction Sites (Αν οι Builders/Repairers χρειάζονται ενέργεια).

Προτεραιότητα 5: Storage (Για αποθήκευση της περίσσειας).

ΣΤΡΑΤΗΓΙΚΗ ΑΜΥΝΑΣ (DefenseManager.js)

Εκτελείται πρώτη για μηδενικό χρόνο αντίδρασης.

A. Εντοπισμός & Στόχευση

HVT Targeting (Focus Fire): Όλοι οι Towers διατάσσονται να στοχεύουν τον ίδιο Εχθρό (Focus Fire) για γρήγορη εξουδετέρωση. Η προτεραιότητα (HVT - Highest Value Target) είναι:

Healers (Θεραπευτές)

Ranged/Attackers (Επιτιθέμενοι)

Claimers (Διεκδικητές)

Threat Level: Υπολογισμός Potential Damage Output (PDO) του εχθρού. Εάν το PDO είναι υψηλό, ορίζεται το Memory.room.threatLevel σε HIGH.

B. Λογική Tower Repair & Safe Mode

Tower Repair: Οι Towers εκτελούν repair() μόνο όταν δεν υπάρχει εχθρός ΚΑΙ δεν χρειάζεται heal() σε φιλικό Creep.

Προτεραιότητα Επισκευών: Επισκευάζουν Ramparts/Walls που έχουν το χαμηλότερο HP, διατηρώντας το πάνω από ένα κρίσιμο όριο (π.χ., 100K).

Safe Mode: Ενεργοποιείται Safe Mode μόνο εάν η απειλή είναι υπερβολική ΚΑΙ το HP του Spawn ή του Controller πέσει κάτω από το κρίσιμο όριο (π.χ., < 50%).

ΟΡΙΣΜΟΣ ΡΟΛΩΝ CREEP & ΣΤΡΑΤΗΓΙΚΗ SPAWN

Ο SpawnManager είναι υπεύθυνος για τη διατήρηση των απαραίτητων Creeps ανάλογα με το RCL (Room Controller Level).

A. Βασικοί Ρόλοι (Core Roles)

| Ρόλος (Role) | Σκοπός | Βασικά Μέρη | Απαιτούμενος Αριθμός (Minimum) | Σημειώσεις |
| Harvester (Θεριστής) | Εξόρυξη ενέργειας από πηγές. | WORK, CARRY, MOVE | 1 per Source (Minimum) | Μπορεί να είναι Static Harvester (χωρίς MOVE) για RCL 4+ αν υπάρχει Link/Container.
| Upgrader (Αναβαθμιστής) | Αναβάθμιση του Room Controller. | WORK, CARRY, MOVE | 2-4 (ανάλογα με την ενέργεια) | Πρέπει να έχει υψηλό WORK για αποτελεσματικότητα.
| Hauler (Μεταφορέας) | Μεταφορά ενέργειας/πόρων (Logistics). | CARRY, MOVE | 2-3 (ανάλογα με την απόσταση) | Το CARRY πρέπει να είναι το κύριο μέρος σώματος.
| Builder (Οικοδόμος) | Κατασκευή νέων κτιρίων. | WORK, CARRY, MOVE | 1-2 (Αν υπάρχουν Construction Sites) | Μπορεί να είναι πανομοιότυπο με τον Harvester.
| Repairer (Επισκευαστής) | Επισκευή κρίσιμων δομών (Ramparts, Roads). | WORK, CARRY, MOVE | 1 (ή ενσωματωμένο στον Builder/Upgrader) | Υψηλή Προτεραιότητα, ειδικά για Towers/Ramparts.

B. Προηγμένοι & Ειδικοί Ρόλοι (Advanced Roles)

| Ρόλος (Role) | Σκοπός | Βασικά Μέρη | Απαιτούμενος Αριθμός (Maximum) | Συνθήκες |
| Miner (Εξορύκτης) | Εξόρυξη Minerals (μόνο RCL 6+). | WORK, MOVE | 1 per Mineral Source | Πρέπει να περιμένει το Mineral να αναγεννηθεί.
| RemoteHarvester (Απομακρυσμένος Θεριστής) | Εξόρυξη σε γειτονικά δωμάτια. | WORK, CARRY, MOVE, ATTACK (προαιρετικά) | Όσο χρειάζεται | Χρειάζεται Escort ή ATTACK για ασφάλεια.
| Claimer (Διεκδικητής) | Διεκδίκηση νέου δωματίου. | CLAIM, MOVE | 1 | Πολύ ακριβό Creep. Χρησιμοποιείται μόνο από τον ExpansionManager.
| Attacker/Defender (Επιτιθέμενος/Αμυνόμενος) | Επίθεση σε εχθρικά Creeps/Δομές. | ATTACK, TOUGH, MOVE | Όσο απαιτείται | Δημιουργείται μόνο όταν το DefenseManager ορίσει το Memory.room.threatLevel σε HIGH.

C. Στρατηγική SpawnManager (Διαδικασία)

Προτεραιότητα Spawn: Ο SpawnManager πρέπει να διατηρεί μια ελάχιστη ποσότητα Haulers και Harvesters.

ΥΨΗΛΗ: Harvester και Hauler (για να μην καταρρεύσει η παραγωγή ενέργειας).

ΜΕΣΑΙΑ: Upgrader, Builder.

ΧΑΜΗΛΗ: RemoteHarvester, Claimer, Attacker.

Adaptive Spawning (Προσαρμοστική Δημιουργία):

Όταν το διαθέσιμο ENERGY είναι κάτω από το μέγιστο (Low RCL), φτιάχνει Small Creeps (π.χ., 1 WORK, 1 CARRY, 1 MOVE).

Όταν το διαθέσιμο ENERGY είναι στο μέγιστο (High RCL), φτιάχνει Biggest Possible Creeps (π.χ., 5 WORK, 10 CARRY, 5 MOVE) για μέγιστη απόδοση CPU.

Role Logic Integration: Πριν δημιουργήσει έναν Creep, ο SpawnManager πρέπει να ελέγξει αν ο αριθμός των Creeps για αυτόν τον Ρόλο είναι κάτω από το καθορισμένο όριο (π.χ., _.filter(Game.creeps, (c) => c.memory.role == 'Harvester').length < 2).

ΛΕΠΤΟΜΕΡΗΣ ΑΝΑΛΥΣΗ ΡΟΛΩΝ CREEP (Role Logic)

A. Βασικοί Ρόλοι

Harvester (Θεριστής)

Σκοπός: Η απόλυτη προτεραιότητα είναι η αδιάλειπτη ροή ενέργειας. Χωρίς Harvesters, η βάση πεθαίνει.

Λογική:

Μετάβαση στην καθορισμένη Source (η οποία έχει αποθηκευτεί στη μνήμη).

Εκτέλεση harvest().

Ενσωματωμένη Λογική Παράδοσης: Εάν είναι Static Harvester (RCL 4+), μεταφέρει την ενέργεια στον γειτονικό Link ή Container. Εάν είναι Mobile Harvester (RCL 1-3), παραδίδει ενέργεια στο κοντινότερο Spawn/Extension ή αφήνει τη δουλειά στον Hauler.

Βελτιστοποίηση CPU: Για RCL 4+, δημιουργείται Static Harvester (π.χ. 6x WORK και 1x MOVE) που κάθεται δίπλα στην πηγή και τροφοδοτεί Link/Container. Αυτό εξοικονομεί τεράστια CPU από το moveTo.

Hauler (Μεταφορέας)

Σκοπός: Ο κινητήρας του LogisticsManager. Μετακινεί πόρους με βάση τα αιτήματα.

Λογική:

Εάν είναι άδειος: Αναζητά την πηγή ενέργειας με την υψηλότερη προτεραιότητα (βλ. Logistics - Withdraw Priority).

Εάν είναι γεμάτος: Αναζητά τον προορισμό με την υψηλότερη προτεραιότητα (βλ. Logistics - Transfer Priority).

Εκτελεί withdraw() ή transfer().

Βελτιστοποίηση: Πρέπει να έχει διπλάσια CARRY μέρη από MOVE μέρη (π.χ., 10 CARRY, 5 MOVE) για να μεταφέρει τη μέγιστη ποσότητα ανά tick.

Upgrader (Αναβαθμιστής)

Σκοπός: Αύξηση του RCL (Controller Level) για το ξεκλείδωμα νέων κτιρίων και δομών.

Λογική:

Συλλέγει ενέργεια από το κοντινό Controller Link ή το Storage.

Μεταβαίνει στον Room Controller.

Εκτελεί upgradeController().

Κρίσιμο: Όσο υψηλότερο το WORK του Upgrader, τόσο πιο γρήγορα ανεβαίνει το RCL. Μετά το RCL 6+, οι Upgraders γίνονται CPU-heavy, οπότε πρέπει να ελέγχεται ο αριθμός τους.

Builder / Repairer (Οικοδόμος / Επισκευαστής)

Σκοπός: Διατήρηση της βάσης και δημιουργία νέων δομών.

Λογική:

Repair Mode (Υψηλότερη Προτεραιότητα): Αν υπάρχει κρίσιμη ζημιά (π.χ., Tower, Road < 50% HP), εκτελεί repair() στον στόχο.

Build Mode (Χαμηλότερη Προτεραιότητα): Αν δεν υπάρχει κρίσιμη ζημιά, εκτελεί build() στο πλησιέστερο Construction Site.

Συλλογή ενέργειας: Εάν είναι άδειος, συλλέγει ενέργεια από το Storage.

B. Προηγμένοι & Ειδικοί Ρόλοι

Remote Harvester (Απομακρυσμένος Θεριστής)

Σκοπός: Εξόρυξη ενέργειας από πηγές που βρίσκονται σε άλλα δωμάτια (Remote Rooms).

Λογική:

Ταξιδεύει στον Remote Room (πρέπει να χρησιμοποιεί ασφαλές path caching).

Harvests.

Αποθηκεύει ενέργεια στο Remote Container που έχει τοποθετηθεί δίπλα στην πηγή.

Σύνδεση με Logistics: Οι Haulers της κεντρικής βάσης αναλαμβάνουν να πάνε στον Remote Container και να "τραβήξουν" (Pull) την ενέργεια πίσω.

Defender / Attacker (Αμυνόμενος / Επιτιθέμενος)

Σκοπός: Άμεση στρατιωτική αντίδραση σε εχθρική παρουσία.

Λογική:

Δημιουργείται μόνο όταν το DefenseManager εντοπίσει εισβολέα.

Μεταβαίνει στον στόχο (με προτεραιότητα τον HVT).

Εκτελεί attack() ή rangedAttack() / heal() (για Healers).

Στρατηγική: Πρέπει να έχουν αρκετά TOUGH μέρη για να αποροφήσουν ζημιές και επαρκή MOVE για να είναι γρήγοροι.

Claimer (Διεκδικητής)

Σκοπός: Μόνιμη διεκδίκηση ενός νέου δωματίου ή άμεση καταστροφή ενός εχθρικού Controller (attackController).

Λογική:

Ταξιδεύει στο απροσδιόριστο δωμάτιο.

Εκτελεί claimController() (πολύ ακριβό σε ενέργεια, αλλά μόνιμο) ή reserveController() (λιγότερο ακριβό, για εξόρυξη).

Προσοχή: Είναι το πιο ακριβό Creep. Η δημιουργία του ενεργοποιείται αυστηρά από τον ExpansionManager μόνο όταν υπάρχει επαρκής περίσσεια ενέργειας.